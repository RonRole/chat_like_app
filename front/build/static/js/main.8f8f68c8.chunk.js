(this["webpackJsonpchat-like-app"]=this["webpackJsonpchat-like-app"]||[]).push([[0],{162:function(e,t,r){e.exports=r(238)},168:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(73),c=r(121),s=function(e){var t=e.show,r=e.onSubmit,a=e.name,s=e.children;return n.a.createElement(o.a,{show:t,size:"md",centered:!0},n.a.createElement(c.a,{onSubmit:function(e){return r(e)},name:a},s))};s.defaultProps={show:!1,name:"",onSubmit:function(e){console.log("please set onSubmit event")}},s.Header=function(e){var t=e.children,r=void 0===t?[]:t;return n.a.createElement(o.a.Header,null,r)},s.Body=function(e){var t=e.children,r=void 0===t?[]:t;return n.a.createElement(o.a.Body,null,r)},s.Footer=function(e){var t=e.children,r=void 0===t?[]:t;return n.a.createElement(o.a.Footer,null,r)},t.default=s},235:function(e,t){},238:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(21),c=r.n(o),s=(r(167),r(168),r(47)),u=r(48),l=r(51),i=r(49),m=r(24),d=r(155),f=r(84),p=function(e){Object(l.a)(r,e);var t=Object(i.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return n.a.createElement(d.a,{collapseOnSelect:!0,expand:"sm",bg:"dark",variant:"dark",sticky:"top"},n.a.createElement(d.a.Brand,null,"CHAT LIKE APP"),n.a.createElement(d.a.Toggle,null),n.a.createElement(d.a.Collapse,null,n.a.createElement(f.a,null,this.props.children)))}}]),r}(n.a.Component),E=r(9),g=r(10),b={EXEC_DEF_LOG_IN:"EXEC_DEF_LOG_IN",FINISH_DEF_LOG_IN:"FINISH_DEF_LOG_IN",EXEC_LOG_IN:"EXEC_LOG_IN",LOG_IN:"LOG_IN",EXEC_LOG_OUT:"EXEC_LOG_OUT",LOG_OUT:"LOG_OUT"},v={execLogin:function(e){var t=e.session,r=void 0===t?{name:"",password:""}:t,a=e.history,n=void 0===a?{}:a,o=e.then;return{type:b.EXEC_LOG_IN,session:r,history:n,then:void 0===o?function(){return console.log("tryed to login")}:o}},cookieLogin:function(){return{type:b.EXEC_DEF_LOG_IN}},finishDefLogin:function(){return{type:b.FINISH_DEF_LOG_IN}},login:function(e){return{type:b.LOG_IN,loginUser:e}},execLogout:function(e){var t=e.history;return{type:b.EXEC_LOG_OUT,history:void 0===t?{}:t}},logout:function(){return{type:b.LOG_OUT}}},O=function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,n=t[a.type];return n?n(r,a):r}},k={};k[b.TRY_LOG_IN]=function(e){return Object(g.a)({},e)},k[b.FINISH_DEF_LOG_IN]=function(e){return Object(g.a)(Object(g.a)({},e),{},{defaultLoginFinished:!0})},k[b.LOG_IN]=function(e,t){return Object(g.a)(Object(g.a)({},e),{},{loginUser:t.loginUser,loginErrorMessages:[]})},k[b.LOG_OUT]=function(e){return Object(g.a)(Object(g.a)({},e),{},{loginUser:!1,loginErrorMessages:[]})};var R=O({defaultLoginFinished:!1,loginUser:null},k),h={actions:v,reducer:{creatReducer:R}},I=function(e){var t=e.children,r=Object(E.useDispatch)(),o=Object(E.useSelector)((function(e){return e.logStatus.defaultLoginFinished}));return Object(a.useEffect)((function(){r(h.actions.cookieLogin())}),[]),o?n.a.createElement("div",null,t):n.a.createElement("div",null)},j=r(127),x=function(){return 0===Object(E.useSelector)((function(e){return e.loading}))?n.a.createElement("div",null):n.a.createElement("div",{className:"loading d-flex justify-content-center align-items-center position-fixed h-100 w-100"},n.a.createElement("div",{className:"loading_background position-absolute h-100 w-100"}),n.a.createElement("div",{className:"loading_item position-absolute d-flex flex-column justify-content-center align-items-center"},n.a.createElement(j.a,{variant:"primary",animation:"border"}),"\u8aad\u307f\u8fbc\u307f\u4e2d\u3067\u3059..."))},y=r(16),_=function(e){var t=e.children,r=void 0===t?[]:t;return n.a.createElement("div",{className:"h-100 sidebar_body"},n.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark h-100"},n.a.createElement(f.a,{className:"sidebar_items navbar-nav h-100"},r)))},S=function(e){var t=e.onClickCursor,r=e.pointRightSide;return n.a.createElement("div",{className:"sidebar_cursor pointer",onClick:t},n.a.createElement("nav",{className:"navbar navbar-dark bg-dark h-100 d-flex justify-content-center"},n.a.createElement(f.a,{className:"navbar-nav"},n.a.createElement("a",{className:"nav-link"},r?"\u25b6\ufe0e":"\u25c0\ufe0e"))))};S.defaultProps={onClickCursor:function(){return console.log("cursor clicked")},pointRightSide:!0};var C=S,w=r(239),N=function(e){var t=e.children,r=Object(a.useState)(!1),o=Object(y.a)(r,2),c=o[0],s=o[1];return n.a.createElement("div",{className:"sidebar"},n.a.createElement(w.a,{in:c,classNames:"slide",timeout:0},n.a.createElement("div",{className:"sidebar_open d-flex position-fixed h-100"},n.a.createElement(_,null,t),n.a.createElement(C,{onClickCursor:function(){return s(!c)},pointRightSide:!c}))))},U=r(53),T=r(133),M=r(128),F=r(240),L=r(85),A=function(e){var t=e.children,r=void 0===t?[]:t,a=e.className;return n.a.createElement("div",{className:"transparent ".concat(a)},r)};A.Front=function(e){var t=e.children,r=e.transParent,a=void 0!==r&&r;return n.a.createElement("div",{className:"front ".concat(a?"opacity":"")},t)},A.Back=function(e){var t=e.children;return n.a.createElement("div",{className:"back"},t)};var G=A,D=function(e){var t=e.talkRoomId,r=e.userId,a=Object(E.useSelector)((function(e){return e.currentRoomStatus})),o=a[t]||a.default,c=Object(E.useSelector)((function(e){return e.users})),s=c[r]||c[0];return n.a.createElement(G,null,n.a.createElement(G.Front,{transParent:o.currentUserStatus[r]},n.a.createElement(L.a,{className:"mr-2 mb-2",src:s.image.thumb.url,fluid:!0})),n.a.createElement(G.Back,null,o.currentUserStatus[r]))},P=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.currentRoomStatus})),a=r[t]||r.default;return n.a.createElement(M.a,{className:"current_users_container mb-2"},n.a.createElement("h6",null,n.a.createElement("strong",null,"\u4eca\u3044\u308b\u4eba\u305f\u3061")),n.a.createElement(F.a,{className:"d-flex"},[a.currentUserIds].flat().map((function(e,r){return n.a.createElement(w.a,{key:r,timeout:100,classNames:"fade"},n.a.createElement(D,{talkRoomId:t,userId:e}))}))))},B="JOIN_ROOM",H="RECEIVE_JOIN_ROOM",V="LEAVE_ROOM",J="RECEIVE_LEAVE_ROOM",X="DISCONNECTED_FROM_SERVER",W="ADD_MESSAGE",K="SEND_MESSAGE",q="RECEIVE_MESSAGE",z="SET_CURRENT_USER_IDS",Y="CLEAR_MESSAGE",$="EXEC_REFRESH_CURRENT_ROOM_USERS",Z="RECEIVE_REFRESH_CURRENT_ROOM_USERS",Q="CHANGE_CURRENT_USER_STATUS",ee="RECEIVE_CURRENT_USER_STATUS",te="CHANGE_NOMLISH",re="CHANGE_TRANSLATION",ae="CHANGE_ROOM_BGM",ne="RECEIVE_CHANGE_ROOM_BGM",oe={joinRoom:function(e){var t=e.roomId,r=e.messageType,a=void 0===r?"text":r,n=e.messageClass,o=void 0===n?"receiveMessage":n,c=e.user,s=e.text;return{type:B,user:c,roomId:t,messageType:a,messageClass:o,text:s}},receiveJoinRoom:function(e){var t=e.roomId,r=e.messageType,a=void 0===r?"text":r,n=e.messageClass,o=void 0===n?"receiveMessage":n,c=e.user,s=e.text;return{type:H,user:c,roomId:t,messageType:a,messageClass:o,text:s}},leaveRoom:function(e){var t=e.roomId,r=e.user,a=e.messageType,n=void 0===a?"text":a,o=e.messageClass,c=void 0===o?"receiveMessage":o,s=e.text;return{type:V,user:r,roomId:t,messageType:n,messageClass:c,text:s}},receiveLeaveRoom:function(e){var t=e.roomId,r=e.user,a=e.messageType,n=void 0===a?"text":a,o=e.messageClass,c=void 0===o?"receiveMessage":o,s=e.text;return{type:J,user:r,roomId:t,messageType:n,messageClass:c,text:s}},addMessage:function(e){var t=e.roomId,r=e.messageType,a=void 0===r?"text":r,n=e.messageClass,o=void 0===n?"receiveMessage":n,c=e.user,s=e.text;return{type:W,roomId:t,messageClass:o,messageType:a,user:c,text:s}},sendMessage:function(e){var t=e.roomId,r=e.messageType,a=void 0===r?"text":r,n=e.messageClass,o=void 0===n?"receiveMessage":n,c=e.user,s=e.text;return{type:K,roomId:t,messageClass:o,messageType:a,user:c,text:s}},receiveMessage:function(e){var t=e.roomId,r=e.user,a=e.messageType,n=e.messageClass,o=e.text;return{type:q,roomId:t,user:r,messageType:a,messageClass:n,text:o}},setCurrentUserIds:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{type:z,users:t}},clearMessage:function(e){return{type:Y,roomId:e}},execRefreshCurrentRoomUserIds:function(e){var t=e.talkRoomId;return{type:$,talkRoomId:t}},receiveRefreshCurrentRoomUsers:function(e){var t=e.talkRoomId,r=e.userIds;return{type:Z,talkRoomId:t,userIds:r}},changeCurrentUserStatus:function(e){var t=e.talkRoomId,r=e.userId,a=e.status;return{type:Q,talkRoomId:t,userId:r,status:a}},receiveCurrentUserStatus:function(e){var t=e.talkRoomId,r=e.userId,a=e.status;return{type:ee,talkRoomId:t,userId:r,status:a}},submitTextMessage:function(e){var t=e.roomId,r=e.user,a=e.text,n=e.translateMode;return{type:te,roomId:t,user:r,text:a,translateMode:n}},changeTranslation:function(e){var t=e.talkRoomId,r=e.translateMode;return{type:re,talkRoomId:t,translateMode:r}},changeRoomBgm:function(e){var t=e.talkRoomId,r=e.bgmSrcUrl;return{type:ae,talkRoomId:t,bgmSrcUrl:r}},receiveChangeRoomBgm:function(e){var t=e.talkRoomId,r=e.bgmSrcUrl;return{type:ne,talkRoomId:t,bgmSrcUrl:r}}},ce=r(18),se={default:{translateMode:"simple",currentUserIds:[],currentUserStatus:{0:""},messages:[]}},ue={};ue[re]=function(e,t){return e[t.talkRoomId]=e[t.talkRoomId]||Object(g.a)({},se.default),e[t.talkRoomId].translateMode=t.translateMode,Object(g.a)({},e)},ue[b.LOG_IN]=function(){return se},ue[B]=ue[H]=ue[J]=ue[W]=ue[q]=function(e,t){return e[t.roomId]=e[t.roomId]||Object(g.a)({},se.default),e[t.roomId].messages=[].concat(Object(ce.a)(e[t.roomId].messages),[{messageType:t.messageType,messageClass:t.messageClass,userId:t.user.id,text:t.text}]),Object(g.a)({},e)},ue[Y]=function(e,t){return e[t.roomId].messages=[],Object(g.a)({},e)},ue[Z]=function(e,t){return e[t.talkRoomId]=e[t.talkRoomId]||Object(g.a)({},se.default),e[t.talkRoomId].currentUserIds=Object(ce.a)(t.userIds),Object(g.a)({},e)},ue[Q]=ue[ee]=function(e,t){var r=e[t.talkRoomId]||Object(g.a)({},se.default);return r.currentUserStatus=r.currentUserStatus||{},r.currentUserStatus[t.userId]=t.status,Object(g.a)({},e)};var le={createMessageReducer:O(se,ue)},ie={actions:oe,reducer:le},me=r(129),de={text:{}};de.text.system=function(e){var t=e.text;return n.a.createElement(me.a,{variant:"warning",className:"col-sm-6 offset-sm-3 text-center"},t)},de.text.joinRoom=function(e){var t=e.text;return n.a.createElement(me.a,{variant:"primary",className:"col-sm-6 offset-sm-3 text-center"},t)},de.text.leaveRoom=function(e){var t=e.text;return n.a.createElement(me.a,{variant:"danger",className:"col-sm-6 offset-sm-3 text-center"},t)},de.text.myMessage=function(e){var t=e.userImageUrl,r=e.userName,a=e.text;return n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,{src:t,roundedCircle:!0}),n.a.createElement("strong",{className:"ml-2"},r),n.a.createElement(me.a,{variant:"success",className:"col-sm-6"},a))},de.text.receiveMessage=function(e){var t=e.userImageUrl,r=e.userName,a=e.text;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"offset-sm-6"},n.a.createElement(L.a,{src:t,roundedCircle:!0}),n.a.createElement("strong",{className:"ml-2"},r)),n.a.createElement(me.a,{variant:"secondary",className:"col-sm-6 offset-sm-6"},a))},de.image={},de.image.messageImage=function(e){var t=e.userImageUrl,r=e.userName,a=e.text;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(L.a,{src:t,roundedCircle:!0}),n.a.createElement("strong",{className:"ml-2"},r)),n.a.createElement(L.a,{src:a,className:"mb-2"}))},de.image.receiveMessageImage=function(e){var t=e.userImageUrl,r=e.userName,a=e.text;return n.a.createElement("div",{className:"d-flex justify-content-end offset-sm-6 col-sm-6"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(L.a,{src:t,roundedCircle:!0}),n.a.createElement("strong",{className:"ml-2"},r)),n.a.createElement(L.a,{src:a,className:"mb-2"})))};var fe=function(e){var t=e.userImageUrl,r=e.userName,a=e.messageType,o=e.messageClass,c=e.text,s=(de[a]||de.text)[o]||de.text.receiveMessage;return n.a.createElement(s,{userImageUrl:t,userName:r,text:c})};fe.defaultProps={userImageUrl:"",userName:"no name",messageType:"test",messageClass:"receiveMessage",text:"test text"};var pe=fe,Ee=function(e){var t=e.talkRoomId,r=Object(E.useDispatch)(),o=Object(E.useSelector)((function(e){return e.logStatus.loginUser})),c=Object(E.useSelector)((function(e){return e.users})),s=Object(E.useSelector)((function(e){return e.currentRoomStatus})),u=(s[t]||s.default).messages;return Object(a.useEffect)((function(){return r(ie.actions.joinRoom({user:o,roomId:t,messageType:"text",messageClass:"joinRoom",text:"".concat(o.name,"\u3055\u3093\u304c\u53c2\u52a0\u3057\u307e\u3057\u305f")})),window.onbeforeunload=function(){r(ie.actions.leaveRoom({user:o,roomId:t,messageType:"text",messageClass:"leaveRoom",text:"".concat(o.name,"\u3055\u3093\u304c\u9000\u51fa\u3057\u307e\u3057\u305f")}))},function(){r(ie.actions.leaveRoom({user:o,roomId:t,messageType:"text",messageClass:"leaveRoom",text:"".concat(o.name,"\u3055\u3093\u304c\u9000\u51fa\u3057\u307e\u3057\u305f")}))}}),[]),Object(a.useEffect)((function(){document.getElementById("messagesContainer").scroll(0,document.getElementById("messagesContainer").scrollHeight)}),[u]),n.a.createElement(M.a,{id:"messagesContainer",className:"mb-2 pb-4"},n.a.createElement(F.a,null,[u].flat().filter((function(e){return e})).map((function(e,t){return n.a.createElement(w.a,{key:t,timeout:100,classNames:"fade"},n.a.createElement(pe,{userName:(c[e.userId]||c[0]).name,userImageUrl:(c[e.userId]||c[0]).image.thumb.url,text:e.text,messageType:e.messageType,messageClass:e.messageClass}))}))))},ge=r(121),be=r(46),ve=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.currentRoomStatus})),a=r[t]||r.default,o=Object(E.useSelector)((function(e){return e.translateModes})),c=Object(E.useSelector)((function(e){return e.logStatus.loginUser})),s=Object(E.useDispatch)(),u=function(){return s(ie.actions.changeCurrentUserStatus({talkRoomId:t,userId:c.id,status:"\u270d\ufe0f"}))},l=function(){return s(ie.actions.changeCurrentUserStatus({talkRoomId:t,userId:c.id,status:""}))};return n.a.createElement(M.a,null,n.a.createElement(ge.a,{className:"row mb-2",onSubmit:function(e){e.preventDefault(),s(ie.actions.submitTextMessage({roomId:t,text:e.currentTarget.inputMessage.value,user:c,translateMode:o[a.translateMode]})),l(),e.currentTarget.inputMessage.value=""}},n.a.createElement(ge.a.Control,{className:"col-10 col-lg-11",name:"inputMessage",type:"text",placeholder:o[a.translateMode].placeholder,onFocus:u,onChange:u,onBlur:l,required:!0}),n.a.createElement(be.a,{className:"col-2 col-lg-1",variant:"warning",type:"submit"},"\u25b6")))},Oe=r(19),ke=r(73),Re="EXEC_UPLOAD_MESSAGE_IMAGE",he="EXEC_FETCH_MESSAGE_IMAGES",Ie="EXEC_DELETE_MESSAGE_IMAGE",je="CLEAR_MESSAGE_IMAGE",xe="ADD_MESSAGE_IMAGE",ye="REMOVE_MESSAGE_IMAGE",_e={execUploadMessageImage:function(e){var t=e.userId,r=e.messageImageParams;return{type:Re,userId:t,messageImageParams:r}},execFetchMessageImages:function(e){return{type:he,userId:e}},execDeleteMessageImage:function(e){var t=e.messageImageId,r=e.userId;return{type:Ie,userId:r,messageImageId:t}},addMessageImage:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{type:xe,messageImages:t}},clearMessageImage:function(){return{type:je}},removeMessageImage:function(e){return{type:ye,messageImageId:e}}},Se={0:{id:0,src:""}},Ce={};Ce[xe]=function(e,t){var r=t.messageImages.flat().reduce((function(e,t){return e[t.id]=t,e}),e);return Object(g.a)(Object(g.a)({},e),r)},Ce[je]=function(e,t){return Object(g.a)({},Se)},Ce[ye]=function(e,t){var r=[t.messageImageIds].flat().reduce((function(e,t){return delete e[t],e}),e);return Object(g.a)({},r)};var we=O(Se,Ce),Ne={actions:_e,reducer:{createReducer:we}},Ue=function(e){var t=e.talkRoomId,r=Object(a.useState)(0),o=Object(y.a)(r,2),c=(o[0],o[1]),s=Object(E.useSelector)((function(e){return e.logStatus.loginUser})),u=Object(E.useSelector)((function(e){return e.messageImages})),l=Object(E.useDispatch)();return Object.keys(u).filter((function(e){return u[e]&&u[e].src&&u[e].src.thumb})).map((function(e){return u[e]})).map((function(e,r){return n.a.createElement(L.a,{key:r,className:"mr-1 pointer opacity_under_mouse",src:e.src.thumb.url,onMouseOver:function(){return c(e.id)},onMouseLeave:function(){return c(0)},onClick:function(){l(ie.actions.addMessage({roomId:t,user:s,messageType:"image",messageClass:"messageImage",text:e.src.profile.url})),l(ie.actions.sendMessage({roomId:t,user:s,messageType:"image",messageClass:"receiveMessageImage",text:e.src.profile.url}))}})}))},Te=function(){var e=Object(E.useDispatch)(),t=Object(E.useSelector)((function(e){return e.logStatus.loginUser}));return n.a.createElement(ge.a.Group,null,n.a.createElement(ge.a.Control,{className:"invisible position-absolute",id:"messageImageUploadForm",type:"file",name:"message_image",onChange:function(r){e(Ne.actions.execUploadMessageImage({userId:t.id,messageImageParams:{src:r.currentTarget.files[0]}}))}}),n.a.createElement(be.a,{className:"ml-2",variant:"primary",onClick:function(){document.getElementById("messageImageUploadForm").click()}},"\u65b0\u3057\u3044\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b"))},Me=function(e){var t=e.show,r=e.talkRoomId,a=e.onCancel;return n.a.createElement(ke.a,{show:t},n.a.createElement(ke.a.Header,null,n.a.createElement("h6",null,n.a.createElement("strong",null,"\u753b\u50cf\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"))),n.a.createElement(ke.a.Body,{className:"d-flex row m-2 overflow-scroll"},n.a.createElement(Ue,{talkRoomId:r})),n.a.createElement(ke.a.Footer,null,n.a.createElement(Te,null),n.a.createElement(be.a,{className:"ml-2",variant:"secondary",onClick:a},"\u3084\u3081\u308b")))},Fe=function(e){var t=e.talkRoomId,r=e.className,o=Object(a.useState)(!1),c=Object(y.a)(o,2),s=c[0],u=c[1],l=Object(E.useSelector)((function(e){return e.logStatus.loginUser})),i=Object(E.useDispatch)();return n.a.createElement(n.a.Fragment,null,n.a.createElement(be.a,{variant:"primary",className:r,onClick:function(){i(ie.actions.changeCurrentUserStatus({talkRoomId:t,userId:l.id,status:"\ud83d\uddbc"})),u(!0)}},"Image"),n.a.createElement(Me,{talkRoomId:t,show:s,onCancel:function(){u(!1),i(ie.actions.changeCurrentUserStatus({talkRoomId:t,userId:l.id,status:""}))}}))},Le=r(112),Ae=Object(Le.GoogleApiWrapper)({apiKey:"".concat("AIzaSyD6Swr_P2y7H_aN_KdWN5TVw4fvZ-YpYq4")})((function(e){var t=e.google,r=e.position,a=void 0===r?{latitude:0,longtitude:0}:r;return n.a.createElement("div",{id:"map"},n.a.createElement(Le.Map,{className:"map",google:t,center:{lat:a.latitude,lng:a.longitude},initialCenter:{lat:a.latitude,lng:a.longitude}},n.a.createElement(Le.Marker,{title:"\u73fe\u5728\u5730",position:{lat:a.latitude,lng:a.longitude}})))})),Ge=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.currentRoomStatus})),a=r[t]||r.default,o=Object(E.useSelector)((function(e){return e.users})),c=Object(E.useSelector)((function(e){return e.userPositions}));return n.a.createElement(M.a,{className:"mb-2"},n.a.createElement(F.a,null,[a.currentUserIds].flat().map((function(e,t){return n.a.createElement(w.a,{key:t,timeout:100,classNames:"fade"},n.a.createElement("div",{className:"d-block"},n.a.createElement("div",null,n.a.createElement(L.a,{src:(o[e]||o[0]).image.thumb.url,roundedCircle:!0}),n.a.createElement("strong",null,(o[e]||o[0]).name)),n.a.createElement(Ae,{position:c[e]||c.default})))}))))},De="CHANGE_CURRENT_USER_POSITION",Pe="RECEIVE_CURRENT_USER_POSITION",Be={changeCurrentUserPosition:function(e){var t=e.talkRoomId,r=e.userId,a=e.position;return{type:De,talkRoomId:t,userId:r,position:a}},receiveChangeCurrentUserPosition:function(e){var t=e.talkRoomId,r=e.userId,a=e.position;return{type:Pe,talkRoomId:t,userId:r,position:a}}},He={default:{latitude:0,longitude:0}},Ve={};Ve[De]=Ve[Pe]=function(e,t){return e[t.userId]=e[t.userId]||Object(g.a)({},He),e[t.userId]=t.position,Object(g.a)({},e)};var Je={createUserPositionReducer:O(He,Ve)},Xe={actions:Be,reducer:Je},We=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.logStatus.loginUser})),o=Object(E.useDispatch)();return Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){o(Xe.actions.changeCurrentUserPosition({talkRoomId:t,userId:r.id,position:{latitude:e.coords.latitude,longitude:e.coords.longitude}}))}),(function(e){console.log("\u4f4d\u7f6e\u60c5\u5831\u306e\u53d6\u5f97\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3000code:".concat(e.code," ").concat(e.message))})),navigator.geolocation.watchPosition((function(e){o(Xe.actions.changeCurrentUserPosition({talkRoomId:t,userId:r.id,position:{latitude:e.coords.latitude,longitude:e.coords.longitude}}))}),(function(e){console.log(e)}))}),[]),n.a.createElement(n.a.Fragment,null)},Ke="START_BGM",qe="UPLOAD_BGM",ze="ADD_BGM",Ye={startBgm:function(e){var t=e.bgmSrcUrl;return{type:Ke,bgmSrcUrl:t}},uploadBgm:function(e){var t=e.userId,r=e.bgmParams;return{type:qe,userId:t,bgmParams:r}},addBgms:function(e){var t=e.bgms;return{type:ze,bgms:t}}},$e=r(9),Ze=$e.useSelector,Qe=$e.useDispatch,et=(r(19).default,r(13)),tt=et.Modal,rt=et.ListGroup,at=et.Form,nt=et.Button,ot=function(){return n.a.createElement("h6",null,n.a.createElement("strong",null,"BGM\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"))},ct=function(e){var t=e.talkRoomId,r=Ze((function(e){return e.logStatus.loginUser})),a=Qe(),o=Ze((function(e){return e.bgms}));return n.a.createElement(rt,{className:"w-100"},Object.values(o).filter((function(e){return e.id>0})).map((function(e,o){return n.a.createElement(rt.Item,{key:o,className:"pointer opacity_iterate w-100",onClick:function(){a(ie.actions.addMessage({roomId:t,messageClass:"system",user:r,text:"".concat(r.name,"\u3055\u3093\u304cBGM\u3092\u6d41\u3057\u307e\u3057\u305f")})),a(ie.actions.sendMessage({roomId:t,messageClass:"system",user:r,text:"".concat(r.name,"\u3055\u3093\u304cBGM\u3092\u6d41\u3057\u307e\u3057\u305f")})),a(ie.actions.changeRoomBgm({talkRoomId:t,bgmSrcUrl:e.src.url}))}},e.title)})))},st=function(){var e=Qe(),t=Ze((function(e){return e.logStatus.loginUser}));return n.a.createElement(at.Group,null,n.a.createElement(at.Control,{className:"invisible position-absolute",id:"bgmUploadForm",type:"file",name:"bgm",onChange:function(r){var a=r.currentTarget.files[0];e(Ye.uploadBgm({userId:t.id,bgmParams:{src:a,title:a.name.replace(/\.[^.]+$/,"")}}))}}),n.a.createElement(nt,{className:"ml-2",variant:"primary",onClick:function(){document.getElementById("bgmUploadForm").click()}},"\u65b0\u3057\u3044BGM\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b"))},ut=function(e){var t=e.talkRoomId,r=e.show,a=void 0!==r&&r,o=e.onCancel;return n.a.createElement(tt,{show:a},n.a.createElement(tt.Header,null,n.a.createElement(ot,null)),n.a.createElement(tt.Body,{className:"d-flex row m-2 overflow-scroll"},n.a.createElement(ct,{talkRoomId:t})),n.a.createElement(tt.Footer,null,n.a.createElement(st,null),n.a.createElement(nt,{className:"ml-2",variant:"secondary",onClick:o},"\u3084\u3081\u308b")))},lt=function(e){var t=e.talkRoomId,r=e.className,o=Object(a.useState)(!1),c=Object(y.a)(o,2),s=c[0],u=c[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(be.a,{variant:"primary",className:r,onClick:function(){u(!0)}},"BGM"),n.a.createElement(ut,{talkRoomId:t,show:s,onCancel:function(){return u(!1)}}))},it=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.talkRooms})),a=r.ownRooms[t]||r.joinRooms[t]||r.default;return n.a.createElement(T.a,null,n.a.createElement(M.a,{className:"col-0 col-lg-3"}),n.a.createElement(M.a,{className:"justify-content-center pl-5 pl-sm-0 col-lg-6"},n.a.createElement("strong",null,a.title),n.a.createElement(P,{talkRoomId:t}),n.a.createElement(Ee,{talkRoomId:t}),n.a.createElement(ve,{talkRoomId:t}),n.a.createElement(Fe,{className:"mr-2",talkRoomId:t}),n.a.createElement(lt,{talkRoomId:t})),n.a.createElement(M.a,{className:"col-0 col-lg-3 d-none d-lg-block"},n.a.createElement(Ge,{talkRoomId:t}),n.a.createElement(We,{talkRoomId:t})))},mt=r(131),dt=function(e){var t=e.talkRoomId,r=e.show,o=e.onCancel,c=Object(E.useSelector)((function(e){return e.currentRoomStatus})),s=c[t]||c.default,u=Object(E.useSelector)((function(e){return e.translateModes})),l=Object(a.useState)(u[s.translateMode]),i=Object(y.a)(l,2),m=i[0],d=i[1],f=Object(E.useDispatch)();return n.a.createElement(ke.a,{show:r},n.a.createElement(ke.a.Header,null,n.a.createElement("h6",null,n.a.createElement("strong",null,"\u7ffb\u8a33\u30e2\u30fc\u30c9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"))),n.a.createElement(ke.a.Body,null,n.a.createElement(mt.a,null,Object.values(u).map((function(e,t){return n.a.createElement(mt.a.Item,{className:"pointer opacity_iterate",key:t,onClick:function(){return d(e)},active:m===e},e.modeName)})))),n.a.createElement(ke.a.Body,null,n.a.createElement("h6",null,m.modeTitle),n.a.createElement("div",null,m.description)),n.a.createElement(ke.a.Footer,null,n.a.createElement(be.a,{variant:"primary",onClick:function(){f(ie.actions.changeTranslation({talkRoomId:t,translateMode:m.modeId})),o()}},"\u6c7a\u5b9a"),n.a.createElement(be.a,{variant:"secondary",onClick:function(){d(u[s.translateMode]),o()}},"\u3084\u3081\u308b")))};dt.defaultProps={talkRoomId:0,show:!1,onCancel:function(){return console.log("please set onCancel function")}};var ft=dt,pt=Object(U.g)((function(e){var t=e.match,r=Object(a.useState)(!1),o=Object(y.a)(r,2),c=o[0],s=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(N,null,n.a.createElement(m.b,{className:"nav-link",to:"/talk_rooms"},"\u9000\u51fa\u3059\u308b"),n.a.createElement(m.b,{className:"nav-link",to:"#",onClick:function(){return s(!0)}},"\u7ffb\u8a33\u30e2\u30fc\u30c9\u5909\u66f4")),n.a.createElement(it,{talkRoomId:t.params.id}),n.a.createElement(ft,{show:c,talkRoomId:t.params.id,onCancel:function(){return s(!1)}}))})),Et=function(e){var t=e.exact,r=e.path,a=e.component;return Object(E.useSelector)((function(e){return e.logStatus})).loginUser?n.a.createElement(U.b,{exact:t,path:r,component:a}):n.a.createElement(U.b,{exact:t,path:r,render:function(){return n.a.createElement(U.a,{to:{pathname:"/signin",flash:{message:"\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044",variant:"danger"}}})}})},gt=r(90),bt="SET_ERROR",vt="CLEAR_ERROR_BY_NAME",Ot={setError:function(e){var t=e.formName,r=e.errorJson;return{type:bt,formName:t,errorJson:r}},clearErrorByName:function(e){return{type:vt,formName:e,errorJson:{}}}},kt={default:{formCategory:{formName:""}}},Rt={};Rt[b.LOG_IN]=function(){return kt},Rt[bt]=Rt[vt]=function(e,t){return e[t.formName]=t.errorJson,Object(g.a)({},e)};var ht=O(kt,Rt),It={actions:Ot,reducer:{getErrorsOf:function(e){return function(t){return function(r){return(e.formErrors[t]||[])[r]||[]}}},createReducer:ht}},jt={IdFormGroup:function(e){var t=e.className,r=void 0===t?"":t,a=e.style,o=void 0===a?"":a,c=e.defaultValue,s=void 0===c?"":c,u=e.errorMessages,l=void 0===u?[]:u,i=e.required,m=void 0!==i&&i;return n.a.createElement(ge.a.Group,{controlId:"idForm",className:r,style:Object(g.a)({},o)},n.a.createElement(ge.a.Label,null,"\u30e6\u30fc\u30b6\u30fcID"),n.a.createElement(ge.a.Control,{type:"text",name:"id",placeholder:"ID",isInvalid:l.length>0,defaultValue:s,required:m}),n.a.createElement(ge.a.Control.Feedback,{type:"invalid"},l.find((function(e){return e}))))},NameFormGroup:function(e){var t=e.className,r=void 0===t?"":t,a=e.style,o=void 0===a?"":a,c=e.defaultValue,s=void 0===c?"":c,u=e.errorMessages,l=void 0===u?[]:u,i=e.required,m=void 0!==i&&i;return n.a.createElement(ge.a.Group,{controlId:"nameForm",className:r,style:Object(g.a)({},o)},n.a.createElement(ge.a.Label,null,"\u540d\u524d"),n.a.createElement(ge.a.Control,{type:"text",name:"name",placeholder:"\u540d\u524d",isInvalid:l.length>0,defaultValue:s,required:m}),n.a.createElement(ge.a.Control.Feedback,{type:"invalid"},l.find((function(e){return e}))))},PasswordFormGroup:function(e){var t=e.className,r=void 0===t?"":t,a=e.style,o=void 0===a?"":a,c=(e.defaultValue,e.errorMessages),s=void 0===c?[]:c;return n.a.createElement(ge.a.Group,{controlId:"passwordForm",className:r,style:Object(g.a)({},o)},n.a.createElement(ge.a.Label,null,"\u30d1\u30b9\u30ef\u30fc\u30c9"),n.a.createElement(ge.a.Control,{type:"password",name:"password",placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9",isInvalid:s.length>0}),n.a.createElement(ge.a.Control.Feedback,{type:"invalid"},s.find((function(e){return e}))))},PasswordConfirmationFormGroup:function(e){var t=e.className,r=void 0===t?"":t,a=e.style,o=void 0===a?"":a,c=(e.defaultValue,e.errorMessages),s=void 0===c?[]:c;return n.a.createElement(ge.a.Group,{controlId:"passwordConfirmationForm",className:r,style:Object(g.a)({},o)},n.a.createElement(ge.a.Label,null,"\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d"),n.a.createElement(ge.a.Control,{type:"password",name:"password_confirmation",placeholder:"\u3082\u3046\u4e00\u5ea6\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",isInvalid:s.length>0}),n.a.createElement(ge.a.Control.Feedback,{type:"invalid"},s.find((function(e){return e}))))}},xt=function(e){var t=e.defaultValue,r=e.errorMessages,o=Object(a.useState)(t),c=Object(y.a)(o,2),s=c[0],u=c[1],l=Object(a.useState)(!1),i=Object(y.a)(l,2),m=i[0],d=i[1];return n.a.createElement(ge.a.Group,{controlId:"signUpImageForm"},n.a.createElement(ge.a.Control,{style:{display:"none"},type:"file",name:"image",isInvalid:r.length>0,onChange:function(e){var t=new FileReader,r=e.currentTarget.files[0];t.onload=function(e){u(e.target.result)},r?t.readAsDataURL(r):u(null)}}),n.a.createElement(G,null,n.a.createElement(G.Front,{transParent:m},n.a.createElement("img",{style:{backgroundColor:s?"white":""},onClick:function(){return document.getElementById("signUpImageForm").click()},onMouseOver:function(){return d(!0)},onMouseLeave:function(){return d(!1)},className:"mb-2",src:s,width:"200px",height:"200px"})),n.a.createElement(G.Back,null,n.a.createElement("div",{className:"d-flex align-items-center",style:{fontWeight:"bold",color:"gray",height:"200px",width:"200px"}},n.a.createElement("div",{className:"w-100"},"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u50cf\u5909\u66f4")))),n.a.createElement(ge.a.Control.Feedback,{type:"invalid"},r.find((function(e){return e}))))};xt.defaultProps={defaultValue:null,errorMessages:[]},jt.ProfileImageFormGroup=xt;var yt=jt,_t=Object(U.g)((function(e){var t=e.history,r=(Object(E.useSelector)((function(e){return e.formErrors.loginForm}))||{}).messages,o=Object(E.useDispatch)();return Object(a.useEffect)((function(){return function(){o(It.actions.clearErrorByName("loginForm"))}}),[]),n.a.createElement(ge.a,{onSubmit:function(e){e.preventDefault();var r=e.currentTarget;o(h.actions.execLogin({session:{name:r.name.value,password:r.password.value},history:t}))}},n.a.createElement(yt.NameFormGroup,{errorMessages:r}),n.a.createElement(yt.PasswordFormGroup,{errorMessages:r}),n.a.createElement(be.a,{variant:"primary",type:"submit"},"\u30ed\u30b0\u30a4\u30f3"))})),St=Object(U.g)((function(e){var t=e.history;return n.a.createElement(T.a,null,n.a.createElement(gt.a,{xs:{span:10,offset:1},sm:{span:8,offset:2},md:{span:6,offset:3},lg:{span:4,offset:4}},n.a.createElement(_t,{history:t})))})),Ct=function(){return n.a.createElement(T.a,null,n.a.createElement(gt.a,{xs:{span:10,offset:1},sm:{span:8,offset:2},md:{span:6,offset:3},lg:{span:4,offset:4}},n.a.createElement("strong",null,"\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8")))},wt=Object(U.g)((function(e){var t=e.children,r=e.location;return r.flash?n.a.createElement("div",null,n.a.createElement(T.a,null,n.a.createElement(gt.a,{xs:{span:10,offset:1},sm:{span:8,offset:2},md:{span:6,offset:3},lg:{span:4,offset:4}},n.a.createElement(me.a,{variant:r.flash.variant},r.flash.message))),t):n.a.createElement("div",null,t)})),Nt=function(e){Object(l.a)(r,e);var t=Object(i.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return n.a.createElement(M.a,null,n.a.createElement(wt,null,n.a.createElement(Ct,null),n.a.createElement(St,null)))}}]),r}(n.a.Component),Ut="GET_OWN_ROOMS",Tt="GET_JOINED_ROOMS",Mt="EXEC_ADD_ROOM",Ft="EXEC_DELETE_ROOM",Lt="EXEC_UPDATE_ROOM",At="SET_OWN_ROOMS",Gt="SET_JOINED_ROOMS",Dt="ADD_TALK_ROOM",Pt="DELETE_TALK_ROOM",Bt="UPDATE_TALK_ROOM",Ht="EXEC_ADD_USER_TO_TALKROOM",Vt="EXEC_REMOVE_USERS_FROM_TALKROOM",Jt="REMOVE_USERS_FROM_TALKROOM",Xt="EXEC_GET_TALKROOM_AUTHOR",Wt="EXEC_GET_TALKROOM_MEMBER",Kt="ADD_USERS_TO_TALK_ROOM",qt={execGetOwnRooms:function(e){return{type:Ut,history:e}},execGetJoinedRooms:function(e){return{type:Tt,history:e}},execAddTalkRoom:function(e){var t=e.history,r=e.title,a=void 0===r?"New Room":r,n=e.description,o=void 0===n?"This is a new talk room":n,c=e.authorId;return{type:Mt,history:t,title:a,description:o,authorId:c}},execUpdateTalkRoom:function(e){var t=e.talkRoomId,r=e.title,a=e.description;return{type:Lt,talkRoomId:t,title:r,description:a}},execDeleteTalkRoom:function(e){return{type:Ft,talkRoomId:e}},execAddUserToTalkRoom:function(e){var t=e.userId,r=e.talkRoomId;return{type:Ht,userId:t,talkRoomId:r}},execRemoveUsersFromTalkRoom:function(e){var t=e.talkRoomId,r=e.userIds;return{type:Vt,userIds:r,talkRoomId:t}},execGetTalkRoomAuthor:function(e){return{type:Xt,talkRoomId:e}},execGetTalkRoomMembers:function(e){return{type:Wt,talkRoomId:e}},setOwnRooms:function(e){return{type:At,talkRooms:e}},setJoinedRooms:function(e){return{type:Gt,talkRooms:e}},addTalkRoom:function(e){return{type:Dt,talkRoom:e}},updateTalkRoom:function(e){var t=e.talkRoomId,r=e.talkRoom;return{type:Bt,talkRoomId:t,talkRoom:r}},deleteTalkRoom:function(e){var t=e.talkRoomId;return{type:Pt,talkRoomId:t}},addMembersToTalkRoom:function(e){var t=e.talkRoomId,r=e.userIds;return{type:Kt,talkRoomId:t,userIds:r}},removeUsersFromTalkRoom:function(e){var t=e.talkRoomId,r=e.userIds;return{type:Jt,userIds:r,talkRoomId:t}}},zt="EXEC_GET_SELF",Yt="EXEC_CREATE_USER",$t="EXEC_UPDATE_USER",Zt="EXEC_SEARCH_USER",Qt="SET_CREATE_FORM_ERRORS",er="CLEAR_CREATE_FORM_ERRORS",tr="SET_SEARCHED_USER",rr="ADD_USER",ar={execGetSelf:function(){return{type:zt}},execCreateUser:function(e){var t=e.history,r=e.userParams;return{type:Yt,history:t,userParams:r}},execUpdateUser:function(e){return{type:$t,userParams:e}},execSearchUser:function(e){var t=e.userSelfId,r=e.userName;return{type:Zt,userSelfId:t,userName:r}},setCreateFormErrors:function(e){return{type:Qt,errors:e}},clearCreateFormErrors:function(){return{type:er,errors:{}}},setSearchedUsers:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{type:tr,users:t}},clearSearchedUsers:function(){return{type:tr,users:[]}},setUser:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{type:rr,users:t}}},nr={id:0,name:"",image:{url:"",profile:{url:""},thumb:{url:""}}},or={searchedUserIds:[],default:nr,0:nr},cr={};cr[b.LOG_IN]=function(){return Object(g.a)({},or)},cr[rr]=function(e,t){var r=t.users.reduce((function(e,t){return e[t.id]=t,e}),e);return Object(g.a)(Object(g.a)({},e),r)},cr[tr]=function(e,t){var r=t.users.reduce((function(e,t){return e[t.id]=t,e}),e);return Object(g.a)(Object(g.a)(Object(g.a)({},e),r),{},{searchedUserIds:t.users.map((function(e){return e.id}))})};var sr=O(or,cr),ur={actions:ar,reducer:{defaultUser:nr,getUserById:function(e){return function(t){var r=e.users[t]||Object(g.a)({},nr);return r.isAuthorOf=function(t){return(e.talkRooms.joinRooms[t]||e.talkRooms.ownRooms[t]||{}).author_id===r.id},r.isCurrentUser=function(){return e.logStatus.loginUser.id===r.id},e.users[t]||nr}},createReducer:sr}},lr={ownRooms:{},joinRooms:{},default:{author_id:0,created_at:"",description:"",id:0,title:"",updated_at:"",user_ids:[]}},ir={};ir[At]=function(e,t){var r=t.talkRooms.reduce((function(e,t){return e[t.id]=t,e}),{});return Object(g.a)(Object(g.a)({},e),{},{ownRooms:r})},ir[Gt]=function(e,t){var r=t.talkRooms.reduce((function(e,t){return e[t.id]=t,e}),{});return Object(g.a)(Object(g.a)({},e),{},{joinRooms:r})},ir[Dt]=function(e,t){return e.ownRooms[t.talkRoom.id]=t.talkRoom,Object(g.a)({},e)},ir[Pt]=function(e,t){return delete e.ownRooms[t.talkRoomId],Object(g.a)({},e)},ir[Kt]=function(e,t){var r=e.ownRooms[t.talkRoomId]||e.joinRooms[t.talkRoomId]||{user_ids:[]},a=r.user_ids||[];return r.user_ids=Object(ce.a)(new Set([].concat(Object(ce.a)(a),Object(ce.a)(t.userIds)))),Object(g.a)({},e)},ir[Jt]=function(e,t){var r=e.ownRooms[t.talkRoomId]||e.joinRooms[t.talkRoomId]||{user_ids:[]},a=new Set(r.user_ids||[]),n=t.userIds.reduce((function(e,t){return e.delete(t),e}),a);return r.user_ids=n,Object(g.a)({},e)},ir[Bt]=function(e,t){return e.ownRooms[t.talkRoomId]=Object(g.a)(Object(g.a)({},e.ownRooms[t.talkRoomId]),t.talkRoom),Object(g.a)({},e)};var mr=O(lr,ir),dr={actions:qt,reducer:{getOwnRoomIds:function(e){return Object.keys(e.talkRooms.ownRooms)},getJoinRoomIds:function(e){return Object.keys(e.talkRooms.joinRooms)},getTalkRoomById:function(e){return function(t){var r=e.talkRooms.ownRooms[t]||e.talkRooms.joinRooms[t]||lr.default;return r.getAllUsers=function(){return Object(ce.a)(new Set([].concat(Object(ce.a)(r.user_ids||[]),[r.author_id]))).map((function(t){return ur.reducer.getUserById(e)(t)}))},r.getAuthor=function(){return ur.reducer.getUserById(e)(r.author_id)},r.getMembers=function(){return Object(ce.a)(new Set(r.user_ids||[])).filter((function(e){return e!==r.author_id})).map((function(t){return ur.reducer.getUserById(e)(t)}))},r}},createReducer:mr}},fr={Title:function(e){var t=e.className,r=void 0===t?"":t,a=e.style,o=void 0===a?"":a,c=e.errorMessages,s=void 0===c?[]:c,u=e.defaultValue,l=void 0===u?"":u;return n.a.createElement(ge.a.Group,{controlId:"titleForm",className:r,style:Object(g.a)({},o)},n.a.createElement(ge.a.Label,null,"\u30bf\u30a4\u30c8\u30eb"),n.a.createElement(ge.a.Control,{type:"text",name:"title",placeholder:"\u30bf\u30a4\u30c8\u30eb",isInvalid:s.length>0,defaultValue:l}),n.a.createElement(ge.a.Control.Feedback,{type:"invalid"},s))},Description:function(e){var t=e.className,r=void 0===t?"":t,a=e.style,o=void 0===a?"":a,c=e.errorMessages,s=void 0===c?[]:c,u=e.defaultValue,l=void 0===u?"":u;return n.a.createElement(ge.a.Group,{controlId:"descriptionForm",className:r,style:Object(g.a)({},o)},n.a.createElement(ge.a.Label,null,"\u8aac\u660e"),n.a.createElement(ge.a.Control,{type:"text",name:"description",placeholder:"\u8aac\u660e",isInvalid:s.length>0,defaultValue:l}),n.a.createElement(ge.a.Control.Feedback,{type:"invalid"},s.find((function(e){return e}))))}},pr=fr,Er=function(e){var t=e.show,r=void 0!==t&&t,a=e.toCloseModalAction,o=void 0===a?function(){return console.log("onCancel event")}:a,c=Object(E.useSelector)((function(e){return e.logStatus.loginUser}))||{},s=Object(E.useSelector)((function(e){return e.formErrors.createTalkRoomForm}))||{},u=Object(E.useDispatch)();return n.a.createElement(Oe.default,{show:r,onSubmit:function(e){e.preventDefault();var t=e.currentTarget;u(dr.actions.execAddTalkRoom({title:t.title.value,description:t.description.value,authorId:c.id})),u(It.actions.clearErrorByName("createTalkRoomForm"))}},n.a.createElement(Oe.default.Header,null,n.a.createElement("strong",null,"\u30c8\u30fc\u30af\u30eb\u30fc\u30e0\u3092\u3064\u304f\u308b")),n.a.createElement(Oe.default.Body,null,n.a.createElement(pr.Title,{errorMessages:s.title}),n.a.createElement(pr.Description,{errorMessages:s.description})),n.a.createElement(Oe.default.Footer,null,n.a.createElement(be.a,{className:"mr-2",type:"submit"},"\u3064\u304f\u308b"),n.a.createElement(be.a,{variant:"secondary",onClick:function(){o(),u(It.actions.clearErrorByName("createTalkRoomForm"))}},"\u3084\u3081\u308b")))},gr=r(132),br=r(130),vr=r(26),Or=function(e){var t=e.talkRoomId,r=e.show,a=e.onCancel,o=Object(E.useSelector)((function(e){return e.talkRooms})),c=o.ownRooms[t]||o.joinRooms[t]||o.default,s=Object(E.useSelector)((function(e){return e.formErrors})).updateTalkRoomForm||{title:[],description:[]},u=Object(E.useDispatch)();return n.a.createElement(Oe.default,{show:r,onSubmit:function(e){e.preventDefault(),u(dr.actions.execUpdateTalkRoom({talkRoomId:t,title:e.currentTarget.title.value||c.title,description:e.currentTarget.description.value||c.description})),a()}},n.a.createElement(Oe.default.Header,null,n.a.createElement("h6",null,n.a.createElement("strong",null,"\u300c",c.title,"\u300d\u306e\u30c8\u30fc\u30af\u30eb\u30fc\u30e0\u60c5\u5831\u5909\u66f4"))),n.a.createElement(Oe.default.Body,null,n.a.createElement(pr.Title,{errorMessages:s.title,defaultValue:c.title}),n.a.createElement(pr.Description,{errorMessages:s.description,defaultValue:c.description})),n.a.createElement(Oe.default.Footer,null,n.a.createElement(be.a,{className:"mr-2",type:"submit"},"\u304b\u3048\u308b"),n.a.createElement(be.a,{variant:"secondary",onClick:a},"\u3084\u3081\u308b")))},kr=function(e){var t=e.userId,r=e.talkRoomId,a=Object(E.useSelector)((function(e){return e.talkRooms})),o=a.ownRooms[r]||a.joinRooms[r]||a.default,c=Object(E.useDispatch)();return[o.author_id,o.user_ids].flat().some((function(e){return e===t}))?n.a.createElement(be.a,{variant:"success",disabled:!0},"\u3059\u3067\u306b\u53c2\u52a0\u3057\u3066\u3044\u307e\u3059"):n.a.createElement(be.a,{variant:"success",onClick:function(){c(dr.actions.execAddUserToTalkRoom({userId:t,talkRoomId:r}))}},"\u8a98\u3046")},Rr=function(e){var t=e.className,r=void 0===t?"":t,a=e.without,o=void 0===a?[]:a,c=e.user,s=void 0===c?{id:0,name:"",image:{profile:{url:""}}}:c,u={};u.self_id=n.a.createElement("div",{id:"loginUserID"},n.a.createElement("strong",{style:{borderBottom:"1px solid gray"}},"\u30e6\u30fc\u30b6\u30fcID"),n.a.createElement("div",null,s.self_id)),u.name=n.a.createElement("div",{id:"loginUserName"},n.a.createElement("strong",{style:{borderBottom:"1px solid gray"}},"\u304a\u540d\u524d"),n.a.createElement("div",null,s.name)),u.image=n.a.createElement(L.a,{style:{objectFit:"contain"},src:s.image.profile.url});var l=Object.keys(u).filter((function(e){return!o.includes(e)})).reduce((function(e,t){return e[t]=t,e}),{});return n.a.createElement(M.a,{className:"".concat(r," d-flex justify-content-center")},n.a.createElement("section",{id:"info"},u[l.self_id],u[l.name]),u[l.image])},hr=function(e){var t=e.show,r=e.talkRoomId,a=e.onCancel,o=Object(E.useDispatch)(),c=Object(E.useSelector)((function(e){return e.users})),s=Object(E.useSelector)((function(e){return e.users.searchedUserIds})),u=Object(E.useSelector)((function(e){return e.formErrors})).userInviteForm||[];return n.a.createElement(Oe.default,{show:t,onSubmit:function(e){e.preventDefault(),o(It.actions.clearErrorByName("userInviteForm")),o(ur.actions.execSearchUser({userSelfId:e.currentTarget.id.value,userName:e.currentTarget.name.value}))}},n.a.createElement(Oe.default.Header,null,n.a.createElement("strong",null,"\u30e6\u30fc\u30b6\u30fc\u3092\u8a98\u3046")),n.a.createElement(Oe.default.Body,null,n.a.createElement(yt.IdFormGroup,{errorMessages:u.messages,required:!0}),n.a.createElement(yt.NameFormGroup,{errorMessages:u.messages,required:!0}),n.a.createElement(F.a,null,Object(ce.a)(s).map((function(e){return c[e]})).filter((function(e){return e})).map((function(e){return n.a.createElement(w.a,{key:e.id,classNames:"fade",timeout:100},n.a.createElement("div",null,n.a.createElement("h6",{style:{textAlign:"center"}},n.a.createElement("strong",null,"\u3053\u306e\u4eba\u3092\u8a98\u3044\u307e\u3059\u304b?")),n.a.createElement(Rr,{className:"mb-2",user:e}),n.a.createElement("div",{className:"d-flex justify-content-end"},n.a.createElement(kr,{userId:e.id,talkRoomId:r}))))})))),n.a.createElement(Oe.default.Footer,null,n.a.createElement(be.a,{className:"mr-2",type:"submit"},"\u3055\u304c\u3059"),n.a.createElement(be.a,{variant:"secondary",onClick:function(){a(),o(ur.actions.clearSearchedUsers()),o(It.actions.clearErrorByName("userInviteForm"))}},"\u3084\u3081\u308b")))},Ir=function(e){var t=e.talkRoomId,r=e.show,o=e.onCancel,c=Object(E.useDispatch)(),s=Object(E.useSelector)((function(e){return e.talkRooms})),u=s.ownRooms[t]||s.joinRooms[t]||s.default,l=Object(E.useSelector)((function(e){return e.users})),i=Object(a.useState)({}),m=Object(y.a)(i,2),d=m[0],f=m[1];return n.a.createElement(Oe.default,{show:r,onSubmit:function(e){e.preventDefault(),c(dr.actions.execRemoveUsersFromTalkRoom({talkRoomId:t,userIds:Object.keys(d).map((function(e){return parseInt(e)}))}))}},n.a.createElement(ke.a.Header,null,n.a.createElement("h6",null,n.a.createElement("strong",null,"\u300c",u.title,"\u300d\u304b\u3089\u5225\u308c\u308b\u30e1\u30f3\u30d0\u30fc\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"))),n.a.createElement(ke.a.Body,{id:"talkRoomMembersModalBody"},n.a.createElement(mt.a,{variant:"flush"},n.a.createElement(F.a,null,Object(ce.a)(new Set(u.user_ids)).map((function(e,t){return n.a.createElement(w.a,{key:t,timeout:200,classNames:"fade"},n.a.createElement(mt.a.Item,{variant:d[e],className:"pointer opacity_iterate",onClick:function(){d[e]?delete d[e]:d[e]="danger",f(Object(g.a)({},d))}},n.a.createElement(Rr,{user:l[e]||l[0],without:"self_id"})))}))))),n.a.createElement(ke.a.Footer,null,n.a.createElement(be.a,{variant:"danger",type:"submit",disabled:0===Object.keys(d).length},"\u5225\u308c\u308b"),n.a.createElement(be.a,{variant:"secondary",onClick:function(){f({}),o()}},"\u9589\u3058\u308b")))},jr=function(e){var t=e.talkRoomId,r=Object(a.useState)(!1),o=Object(y.a)(r,2),c=o[0],s=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(vr.a.Item,{style:{color:"orange"},onClick:function(){return s(!0)}},"\u4f5c\u308a\u76f4\u3059"),n.a.createElement(Or,{talkRoomId:t,show:c,onCancel:function(){s(!1)}}))},xr=function(e){var t=e.talkRoomId,r=Object(a.useState)(!1),o=Object(y.a)(r,2),c=o[0],s=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(vr.a.Item,{style:{color:"blue"},onClick:function(){return s(!0)}},"\u8a98\u3046"),n.a.createElement(hr,{talkRoomId:t,show:c,onCancel:function(){s(!1)}}))},yr=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.talkRooms})),a=r.joinRooms[t]||r.ownRooms[t]||r.defaultRoom,o=Object(E.useDispatch)();return n.a.createElement(vr.a.Item,{style:{color:"red"},onClick:function(){window.confirm("".concat(a.title,"\u3092\u524a\u9664\u3057\u307e\u3059\u304b?"))&&o(dr.actions.execDeleteTalkRoom(t))}},"\u6d88\u3059")},_r=function(e){var t=e.talkRoomId,r=Object(a.useState)(!1),o=Object(y.a)(r,2),c=o[0],s=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(vr.a.Item,{onClick:function(){return s(!0)}},"\u5225\u308c\u308b"),n.a.createElement(Ir,{show:c,talkRoomId:t,onCancel:function(){return s(!1)}}))},Sr=function(e){var t=e.talkRoomId;return n.a.createElement(vr.a,null,n.a.createElement(vr.a.Toggle,{variant:"success"},"\u30eb\u30fc\u30e0\u8a2d\u5b9a"),n.a.createElement(vr.a.Menu,null,n.a.createElement(xr,{talkRoomId:t}),n.a.createElement(_r,{talkRoomId:t}),n.a.createElement(jr,{talkRoomId:t}),n.a.createElement(yr,{talkRoomId:t})))},Cr=function(e){var t=e.show,r=e.onCancel,a=e.talkRoomId,o=Object(E.useSelector)((function(e){return e.talkRooms})),c=o.ownRooms[a]||o.joinRooms[a]||o.default,s=Object(E.useSelector)((function(e){return e.users}));return n.a.createElement(ke.a,{show:t},n.a.createElement(ke.a.Header,null,n.a.createElement("strong",null,c.title,"\u306e\u30e1\u30f3\u30d0\u30fc")),n.a.createElement(ke.a.Body,{id:"talkRoomMembersModalBody"},n.a.createElement(mt.a,{variant:"flush"},n.a.createElement(mt.a.Item,{variant:"success"},n.a.createElement("strong",null,"\u7ba1\u7406\u8005"),n.a.createElement(Rr,{user:s[c.author_id]||s[0],without:"self_id"})),Object(ce.a)(new Set(c.user_ids)).map((function(e,t){return n.a.createElement(mt.a.Item,{key:t},n.a.createElement(Rr,{user:s[e]||s[0],without:"self_id"}))})))),n.a.createElement(ke.a.Footer,null,n.a.createElement(be.a,{variant:"secondary",onClick:r},"\u9589\u3058\u308b")))},wr=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.talkRooms})),a=r.joinRooms[t]||r.ownRooms[t]||r.default;return n.a.createElement("div",{className:"mr-2 w-100 overflow-auto"},n.a.createElement(br.a.Title,null,n.a.createElement("strong",null,a.title)),n.a.createElement(br.a.Text,null,a.description))},Nr=function(e){var t=e.talkRoomId,r=Object(E.useSelector)((function(e){return e.currentRoomStatus})),a=Object(E.useSelector)((function(e){return e.users}));return n.a.createElement(F.a,null,(r[t]||r.default).currentUserIds.map((function(e,t){return n.a.createElement(w.a,{key:t,classNames:"fade",timeout:100},n.a.createElement(L.a,{className:"user_thumb_size",src:(a[e]||a[0]).image.thumb.url,roundedCircle:!0}))})))},Ur=function(e){var t=e.talkRoomId;return n.a.createElement("div",{className:"d-flex w-100"},n.a.createElement(wr,{talkRoomId:t}),n.a.createElement(Nr,{talkRoomId:t}))},Tr=function(e){var t=e.talkRoomId,r=e.history,o=Object(a.useState)(!1),c=Object(y.a)(o,2),s=c[0],u=c[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex justify-content-end mb-2"},n.a.createElement(be.a,{size:"sm",className:"mr-2",onClick:function(){return r.push("/talk_rooms/".concat(t))}},"\u5165\u308b"),n.a.createElement(be.a,{size:"sm",onClick:function(){return u(!0)}},"\u30e1\u30f3\u30d0\u30fc\u4e00\u89a7")),n.a.createElement(Cr,{show:s,talkRoomId:t,onCancel:function(){return u(!1)}}))},Mr=function(e){var t=e.history,r=e.talkRoomId,o=e.readOnly,c=Object(E.useDispatch)();return Object(a.useEffect)((function(){c(oe.execRefreshCurrentRoomUserIds({talkRoomId:r}))}),[]),n.a.createElement(br.a,null,n.a.createElement(br.a.Body,null,n.a.createElement(Ur,{talkRoomId:r}),n.a.createElement(Tr,{talkRoomId:r,history:t}),n.a.createElement("div",{className:"d-flex justify-content-end"},[o].filter((function(e){return!e})).map((function(e,t){return n.a.createElement(Sr,{key:t,talkRoomId:r})})))))};Mr.defaultProps={talkRoomId:0,readOnly:!1};var Fr=Object(U.g)(Mr),Lr=function(e){var t=e.itemLengthPerPage,r=e.selectedPage,a=e.WrapWith,o=e.className,c=e.children;return n.a.createElement(a,{className:o},Object(ce.a)(Array(t)).map((function(e,a){return c[t*(r-1)+a]})))};Lr.defaultProps={itemLengthPerPage:3,selectedPage:1,WrapWith:"div",className:""};var Ar=Lr,Gr=function(e){var t=e.itemLengthPerPage,r=Object(E.useSelector)((function(e){return e.talkRooms.ownRooms})),o=Object.values(r),c=Object(a.useState)(1),s=Object(y.a)(c,2),u=s[0],l=s[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ar,{className:"row mb-2 talkRoomCardsRow",selectedPage:u,WrapWith:F.a},o.map((function(e,t){return n.a.createElement(w.a,{timeout:100,classNames:"fade",key:t},n.a.createElement(gt.a,{md:4},n.a.createElement(Fr,{talkRoomId:e.id})))}))),n.a.createElement(gr.a,null,Object(ce.a)(Array(Math.ceil(o.length/t))).map((function(e,t){return t+1})).map((function(e){return n.a.createElement(gr.a.Item,{key:e,active:e===u,onClick:function(){return l(e)}},e)}))))};Gr.defaultProps={itemLengthPerPage:3};var Dr=function(e){var t=e.itemLengthPerPage,r=Object(E.useSelector)((function(e){return e.talkRooms.joinRooms})),o=Object.values(r),c=Object(a.useState)(1),s=Object(y.a)(c,2),u=s[0],l=s[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ar,{className:"row mb-2 talkRoomCardsRow",selectedPage:u,WrapWith:F.a},o.map((function(e,t){return n.a.createElement(w.a,{timeout:100,classNames:"fade",key:t},n.a.createElement(gt.a,{md:4},n.a.createElement(Fr,{talkRoomId:e.id,readOnly:!0})))}))),n.a.createElement(gr.a,null,Object(ce.a)(Array(Math.ceil(o.length/t))).map((function(e,t){return t+1})).map((function(e){return n.a.createElement(gr.a.Item,{key:e,active:e===u,onClick:function(){return l(e)}},e)}))))};Dr.defaultProps={itemLengthPerPage:3};var Pr={OwnRoomsArea:Gr,JoinRoomsArea:Dr},Br={};Br.OwnRoomLabel=function(){var e=Object(E.useSelector)((function(e){return e.logStatus.loginUser}));return n.a.createElement("div",null,n.a.createElement("h6",{style:{borderBottom:"1px solid gray"}},n.a.createElement("strong",null,e.name),"\u3055\u3093\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u30c8\u30fc\u30af\u30eb\u30fc\u30e0"))},Br.JoinRoomLabel=function(){var e=Object(E.useSelector)((function(e){return e.logStatus.loginUser}));return n.a.createElement("div",null,n.a.createElement("h6",{style:{borderBottom:"1px solid gray"}},n.a.createElement("strong",null,e.name),"\u3055\u3093\u304c\u53c2\u52a0\u3057\u3066\u3044\u308b\u30c8\u30fc\u30af\u30eb\u30fc\u30e0"))};var Hr=Br,Vr=Object(U.g)((function(e){e.match;var t=Object(a.useState)(!1),r=Object(y.a)(t,2),o=r[0],c=r[1];return n.a.createElement(M.a,null,n.a.createElement(Hr.OwnRoomLabel,null),n.a.createElement(be.a,{variant:"primary",className:"mb-2",onClick:function(){return c(!0)}},"\u30c8\u30fc\u30af\u30eb\u30fc\u30e0\u3092\u8ffd\u52a0"),n.a.createElement(Pr.OwnRoomsArea,{itemLengthPerPage:3}),n.a.createElement(Hr.JoinRoomLabel,null),n.a.createElement(Pr.JoinRoomsArea,{itemLengthPerPage:3}),n.a.createElement(Er,{show:o,toCloseModalAction:function(){c(!1)}}))})),Jr=function(e){var t=e.without,r=e.className,a=Object(E.useSelector)((function(e){return e.logStatus.loginUser}));return n.a.createElement(Rr,{className:r,user:a,without:t})};Jr.defaultProps={without:"",className:""};var Xr=Jr,Wr=function(e){var t=e.userId,r=e.show,a=e.onCancel,o=Object(E.useSelector)((function(e){return e.users})),c=o[t]||o.default,s=Object(E.useSelector)((function(e){return e.formErrors})).updateUserForm||{self_id:[],name:[],image:[]},u=Object(E.useDispatch)();return n.a.createElement(Oe.default,{show:r,onSubmit:function(e){e.preventDefault();var r,a,n={self_id:e.currentTarget.id.value,name:e.currentTarget.name.value,image:e.currentTarget.image.files[0]},o=(r=c,a=n,Object.keys(a).filter((function(e){return r[e]!==a[e]})).filter((function(e){return a[e]})).reduce((function(e,t){return e[t]=a[t],e}),{}));u(ur.actions.execUpdateUser(Object(g.a)({id:t},o)))}},n.a.createElement(Oe.default.Header,null,n.a.createElement("strong",null,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u66f4\u65b0")),n.a.createElement(Oe.default.Body,null,n.a.createElement(yt.IdFormGroup,{defaultValue:c.self_id,errorMessages:s.self_id}),n.a.createElement(yt.NameFormGroup,{defaultValue:c.name,errorMessages:s.name}),n.a.createElement(yt.ProfileImageFormGroup,{defaultValue:c.image.profile.url,errorMessages:s.image})),n.a.createElement(ke.a.Footer,{className:"d-flex justify-content-end"},n.a.createElement(be.a,{type:"submit",className:"mr-2"},"\u66f4\u65b0"),n.a.createElement(be.a,{variant:"secondary",onClick:function(){u(It.actions.clearErrorByName("updateUserForm")),a()}},"\u3084\u3081\u308b")))},Kr=function(e){var t=e.show,r=e.onCancel,a=Object(E.useSelector)((function(e){return e.logStatus.loginUser}));return n.a.createElement(Wr,{userId:a.id,show:t,onCancel:r})};Kr.defaultProps={show:!1,onCancel:function(){return console.log("set onCancel event on UpdateLoginUserForm")}};var qr=Kr,zr=function(e){var t=e.children,r=e.history,a=Object(E.useDispatch)();return n.a.createElement(be.a,{variant:"danger",onClick:function(){return a(h.actions.execLogout({history:r}))}},t)};zr.defaultProps={children:"\u30ed\u30b0\u30a2\u30a6\u30c8"};var Yr=Object(U.g)(zr),$r=function(){var e=Object(a.useState)(!1),t=Object(y.a)(e,2),r=t[0],o=t[1];return n.a.createElement(M.a,{className:"justify-content-center"},n.a.createElement(Xr,{className:"mb-2"}),n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement(be.a,{onClick:function(){return o(!0)}},"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u66f4\u65b0\u3059\u308b")),n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement(Yr,null,"\u30ed\u30b0\u30a2\u30a6\u30c8")),n.a.createElement(qr,{show:r,onCancel:function(){return o(!1)}}))},Zr=function(){return n.a.createElement(T.a,null,n.a.createElement(gt.a,{xs:{span:10,offset:1},sm:{span:8,offset:2},md:{span:6,offset:3},lg:{span:4,offset:4}},n.a.createElement("strong",null,"\u65b0\u898f\u767b\u9332")))},Qr=Object(U.g)((function(e){var t=e.history,r=Object(E.useDispatch)();Object(a.useEffect)((function(){return function(){r(It.actions.clearErrorByName("signUpForm"))}}),[]);var o=Object(E.useSelector)((function(e){return e.formErrors})).signUpForm||{};return n.a.createElement(ge.a,{onSubmit:function(e){e.preventDefault();var a=e.currentTarget;r(ur.actions.execCreateUser({userParams:{name:a.name.value,password:a.password.value,password_confirmation:a.password_confirmation.value,image:a.image.files[0]},history:t}))}},n.a.createElement(yt.NameFormGroup,{errorMessages:o.name}),n.a.createElement(yt.PasswordFormGroup,{errorMessages:o.password}),n.a.createElement(yt.PasswordConfirmationFormGroup,{errorMessages:o.password_confirmation}),n.a.createElement(yt.ProfileImageFormGroup,{errorMessages:o.image}),n.a.createElement(be.a,{variant:"primary",type:"submit"},"\u767b\u9332\u3059\u308b"))})),ea=Object(U.g)((function(e){var t=e.history;return n.a.createElement(T.a,null,n.a.createElement(gt.a,{xs:{span:10,offset:1},sm:{span:8,offset:2},md:{span:6,offset:3},lg:{span:4,offset:4}},n.a.createElement(Qr,{history:t})))})),ta=function(e){Object(l.a)(r,e);var t=Object(i.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return n.a.createElement(M.a,null,n.a.createElement(Zr,null),n.a.createElement(ea,null))}}]),r}(n.a.Component),ra=function(e){var t=e.children;return n.a.createElement(m.a,null,t,n.a.createElement(U.d,null,n.a.createElement(U.b,{path:"/signin",component:Nt}),n.a.createElement(U.b,{path:"/signup",component:ta}),n.a.createElement(Et,{exact:!0,path:"/home",component:$r}),n.a.createElement(Et,{exact:!0,path:"/talk_rooms",component:Vr}),n.a.createElement(Et,{exact:!0,path:"/talk_rooms/:id",component:pt}),n.a.createElement(U.a,{to:"/home"})))},aa=function(e){Object(l.a)(r,e);var t=Object(i.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(x,null),n.a.createElement(I,null,n.a.createElement(ra,null,n.a.createElement(p,null,n.a.createElement(m.b,{className:"nav-link",to:"/home"},"Home"),n.a.createElement(m.b,{className:"nav-link",to:"/signup"},"Sign Up"),n.a.createElement(m.b,{className:"nav-link",to:"/signin"},"Sign In"),n.a.createElement(m.b,{className:"nav-link",to:"/talk_rooms"},"Talk Rooms")))))}}]),r}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var na=r(52),oa=r(37),ca="START_LOADING",sa="FINISH_LOADING",ua={startLoading:function(){return{type:ca}},finishLoading:function(){return{type:sa}}},la={};la[ca]=function(e){return e+1},la[sa]=function(e){return Math.max(e-1,0)};var ia=O(0,la),ma={actions:ua,reducer:{createReducer:ia}},da=r(6),fa=r.n(da),pa=r(3),Ea=r(110);function ga(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return fa.a.mark((function e(r){var a,n,o,c;return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pa.e)(ua.startLoading());case 2:a=Object(Ea.a)(t),e.prev=3,a.s();case 5:if((n=a.n()).done){e.next=14;break}return o=n.value,e.next=9,Object(pa.c)(o,r);case 9:return c=e.sent,e.next=12,Object(pa.d)(c);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),a.e(e.t0);case 19:return e.prev=19,a.f(),e.finish(19);case 22:return e.next=24,Object(pa.e)(ua.finishLoading());case 24:case"end":return e.stop()}}),e,null,[[3,16,19,22]])}))}var ba=r(74),va=r.n(ba);va.a.defaults.withCredentials=!0;var Oa=function(e){return e.then((function(e){return function(e){return{isSuccess:!e.data.isFail,isFail:e.data.isFail,data:e.data}}(e)})).catch((function(e){return function(e){return{isError:!0,data:e}}(e)}))},ka={get:function(e){var t=e.url;return Oa(va.a.get(t))},post:function(e){var t=e.url,r=e.parameter,a=e.headers,n=void 0===a?{}:a;return Oa(va.a.post(t,r,n))},put:function(e){var t=e.url,r=e.parameter;return Oa(va.a.put(t,r))},delete:function(e){var t=e.url,r=e.parameter;return Oa(va.a.delete(t,{data:r}))}},Ra="EXEC_HANDLE_ERROR_CODE",ha="HANDLE_ERROR_CODE",Ia={execHandleError:function(e){var t=e.errorResult,r=e.history,a=void 0===r?{}:r;return{type:ha,errorCode:(t.response||{}).status,history:a}},handleError:function(e){return{type:Ra,errorCode:e}}},ja=fa.a.mark(_a),xa=fa.a.mark(Sa),ya=fa.a.mark(Ca);function _a(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(ka.get,{url:"".concat("https://chat-like-app.herokuapp.com/api","/login")});case 2:if(!(e=t.sent).isSuccess){t.next=10;break}return t.next=6,Object(pa.e)(ar.setUser(e.data));case 6:return t.next=8,Object(pa.e)(v.login(e.data));case 8:t.next=12;break;case 10:return t.next=12,Object(pa.e)(Ia.execHandleError({errorResult:e.data}));case 12:return t.next=14,Object(pa.e)(v.finishDefLogin());case 14:case"end":return t.stop()}}),ja)}function Sa(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(ka.post,{url:"".concat("https://chat-like-app.herokuapp.com/api","/login"),parameter:e.session});case 2:if(!(t=r.sent).isSuccess){r.next=10;break}return alert("\u3088\u3046\u3053\u305d".concat(t.data.name,"\u3055\u3093!")),r.next=7,Object(pa.e)(ar.setUser(t.data));case 7:return r.next=9,Object(pa.e)(v.login(t.data));case 9:e.history.push("/home");case 10:if(!t.isFail){r.next=14;break}return alert("\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f"),r.next=14,Object(pa.e)(Ot.setError({formName:"loginForm",errorJson:t.data}));case 14:if(!t.isError){r.next=17;break}return r.next=17,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 17:e.then();case 18:case"end":return r.stop()}}),xa)}function Ca(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(ka.delete,{url:"".concat("https://chat-like-app.herokuapp.com/api","/logout")});case 2:if(!(t=r.sent).isSuccess){r.next=8;break}return r.next=6,Object(pa.e)(v.logout());case 6:alert("\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f"),e.history.push("/signin");case 8:if(!t.isError){r.next=11;break}return r.next=11,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 11:case"end":return r.stop()}}),ya)}var wa=fa.a.mark(Va),Na=fa.a.mark(Ja),Ua=fa.a.mark(Xa),Ta=fa.a.mark(Wa),Ma=fa.a.mark(Ka),Fa=fa.a.mark(qa),La=fa.a.mark(za),Aa=function(){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/api","/talk_rooms/own")})},Ga=function(){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/api","/talk_rooms/join")})},Da=function(e){var t=e.title,r=e.description,a=e.authorId;return ka.post({url:"".concat("https://chat-like-app.herokuapp.com/api","/talk_rooms"),parameter:{talkroom:{title:t,description:r,author_id:a}}})},Pa=function(e){return ka.put({url:"".concat("https://chat-like-app.herokuapp.com/api","/talk_rooms/").concat(e.id),parameter:{talkroom:e}})},Ba=function(e){return ka.delete({url:"".concat("https://chat-like-app.herokuapp.com/api","/talk_rooms/").concat(e)})},Ha=function(e){var t=e.talkRoomId,r=e.userId;return ka.post({url:"".concat("https://chat-like-app.herokuapp.com/api","/talk_rooms/").concat(t,"/users"),parameter:{user:{id:r}}})};function Va(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(Aa);case 2:if(!(e=t.sent).isSuccess){t.next=6;break}return t.next=6,Object(pa.e)(qt.setOwnRooms(e.data));case 6:if(!e.isError){t.next=9;break}return t.next=9,Object(pa.e)(Ia.execHandleError({errorResult:e.data}));case 9:case"end":return t.stop()}}),wa)}function Ja(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(Ga);case 2:if(!(e=t.sent).isSuccess){t.next=6;break}return t.next=6,Object(pa.e)(qt.setJoinedRooms(e.data));case 6:if(e.isFail&&alert("\u30c8\u30fc\u30af\u30eb\u30fc\u30e0\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"),!e.isError){t.next=10;break}return t.next=10,Object(pa.e)(Ia.execHandleError({errorResult:e.data}));case 10:case"end":return t.stop()}}),Na)}function Xa(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(Da,{title:e.title,description:e.description,authorId:e.authorId});case 2:if(!(t=r.sent).isSuccess){r.next=7;break}return alert("\u300c".concat(t.data.title,"\u300d\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f")),r.next=7,Object(pa.e)(qt.addTalkRoom(t.data));case 7:if(!t.isFail){r.next=11;break}return alert("\u30c8\u30fc\u30af\u30eb\u30fc\u30e0\u3092\u8ffd\u52a0\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"),r.next=11,Object(pa.e)(Ot.setError({formName:"createTalkRoomForm",errorJson:t.data}));case 11:if(!t.isError){r.next=14;break}return r.next=14,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 14:case"end":return r.stop()}}),Ua)}function Wa(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(Pa,{id:e.talkRoomId,title:e.title,description:e.description});case 2:if(!(t=r.sent).isSuccess){r.next=6;break}return r.next=6,Object(pa.e)(qt.updateTalkRoom({talkRoomId:e.talkRoomId,talkRoom:t.data}));case 6:if(!t.isFail){r.next=10;break}return alert("".concat(e.talkRoom.title,"\u306e\u66f4\u65b0\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f")),r.next=10,Object(pa.e)(Ot.setError({formName:"updateTalkRoomForm",errorJson:t.data}));case 10:if(!t.isError){r.next=13;break}return r.next=13,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 13:case"end":return r.stop()}}),Ta)}function Ka(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(Ba,e.talkRoomId);case 2:if(!(t=r.sent).isSuccess){r.next=7;break}return alert("\u524a\u9664\u3057\u307e\u3057\u305f"),r.next=7,Object(pa.e)(qt.deleteTalkRoom({talkRoomId:e.talkRoomId}));case 7:if(t.isFail&&alert("\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"),!t.isError){r.next=11;break}return r.next=11,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 11:case"end":return r.stop()}}),Ma)}function qa(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(Ha,{talkRoomId:e.talkRoomId,userId:e.userId});case 2:if(!(t=r.sent).isSuccess){r.next=9;break}return alert("".concat(t.data.name,"\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f")),r.next=7,Object(pa.e)(ar.setUser(t.data));case 7:return r.next=9,Object(pa.e)(qt.addMembersToTalkRoom({talkRoomId:e.talkRoomId,userIds:[e.userId]}));case 9:if(!t.isFail){r.next=13;break}return alert("\u305d\u3093\u306a\u30e6\u30fc\u30b6\u30fc\u3044\u307e\u305b\u3093"),r.next=13,Object(pa.e)(Ot.setError({formName:"userInviteForm",errorJson:{messages:["\u3053\u306eID,\u540d\u524d\u306e\u7d44\u5408\u308f\u305b\u304c\u5b58\u5728\u3057\u307e\u305b\u3093"]}}));case 13:if(!t.isError){r.next=16;break}return r.next=16,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 16:case"end":return r.stop()}}),Fa)}function za(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(ka.delete,{url:"".concat("https://chat-like-app.herokuapp.com/api","/talk_rooms/").concat(e.talkRoomId,"/users/destroy_multiple"),parameter:{ids:e.userIds}});case 2:if(!(t=r.sent).isSuccess){r.next=7;break}return alert("\u30e6\u30fc\u30b6\u30fc\u3092\u30c8\u30fc\u30af\u30eb\u30fc\u30e0\u304b\u3089\u8ffd\u3044\u51fa\u3057\u307e\u3057\u305f"),r.next=7,Object(pa.e)(qt.removeUsersFromTalkRoom({userIds:e.userIds,talkRoomId:e.talkRoomId}));case 7:if(t.isFail&&alert("\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"),!t.isError){r.next=11;break}return r.next=11,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 11:case"end":return r.stop()}}),La)}var Ya=r(160),$a=r.n(Ya),Za=fa.a.mark(cn),Qa=fa.a.mark(sn),en=fa.a.mark(un),tn=fa.a.mark(ln),rn=fa.a.mark(mn),an=fa.a.mark(dn),nn=fa.a.mark(fn);console.log("socket client connect to ".concat("https://chat-like-app.herokuapp.com"));var on=$a.a.connect("https://chat-like-app.herokuapp.com",{path:"/socket.io"});function cn(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oa.b)((function(e){return on.on("joinRoomMessage",(function(t){e(t)})),function(){on.close()}})));case 1:case"end":return e.stop()}}),Za)}function sn(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oa.b)((function(e){return on.on("leaveRoomMessage",(function(t){e(t)})),function(){on.close()}})));case 1:case"end":return e.stop()}}),Qa)}function un(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oa.b)((function(e){return on.on("receiveMessage",(function(t){e(t)})),function(){on.close()}})));case 1:case"end":return e.stop()}}),en)}function ln(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oa.b)((function(e){return on.on("currentUsers",(function(t){e(t)})),function(){on.close()}})));case 1:case"end":return e.stop()}}),tn)}function mn(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oa.b)((function(e){return on.on("currentUserStatus",(function(t){e(t)})),function(){on.close()}})));case 1:case"end":return e.stop()}}),rn)}function dn(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oa.b)((function(e){return on.on("currentUserPosition",(function(t){e(t)})),function(){on.close()}})));case 1:case"end":return e.stop()}}),an)}function fn(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oa.b)((function(e){return on.on("changeRoomBgm",(function(t){e(t)})),function(){on.close()}})));case 1:case"end":return e.stop()}}),nn)}var pn={connectToServer:function(){return on.connect()},disconnectToServer:function(){return on.disconnect()},tellJoinedRoom:function(e){var t=e.roomId,r=e.messageType,a=e.messageClass,n=e.text,o=e.user;on.emit("joinRoomMessage",{roomId:t,messageType:r,messageClass:a,text:n,user:o}),on.emit("currentUsers",t)},fetchCurrentRoomUsers:function(e){var t=e.talkRoomId;on.emit("currentUsers",t)},tellLeavedRoom:function(e){var t=e.roomId,r=e.messageType,a=e.messageClass,n=e.text,o=e.user;on.emit("leaveRoomMessage",{roomId:t,messageType:r,messageClass:a,text:n,user:o}),on.emit("currentUsers",t)},tellCurrentRoomUsersChanged:function(e){return on.emit("currentUsers",e)},tellCurrentRoomUserStatusChanged:function(e){var t=e.talkRoomId,r=e.userId,a=e.status;on.emit("currentUserStatus",{talkRoomId:t,userId:r,status:a})},tellCurrentRoomUserPositionChanged:function(e){var t=e.talkRoomId,r=e.userId,a=e.position,n=void 0===a?{latitude:0,longitude:0}:a;on.emit("changeUserPosition",{talkRoomId:t,userId:r,position:n})},tellGetCurrentRoomUserPosition:function(e){var t=e.talkRoomId;on.emit("currentUserPosition",{talkRoomId:t})},sendMessage:function(e){var t=e.roomId,r=e.messageType,a=e.messageClass,n=e.text,o=e.user;on.emit("sendMessage",{roomId:t,messageType:r,messageClass:a,text:n,user:o})},tellChangeRoomBgm:function(e){var t=e.talkRoomId,r=e.bgmSrcUrl;on.emit("changeRoomBgm",{talkRoomId:t,bgmSrcUrl:r})}},En={readyToRecconect:function(e){var t=e.user,r=e.roomId;on.on("reconnect",(function(){on.emit("rejoinRoom",{user:t,roomId:r}),on.emit("currentUsers",r)}))}},gn=fa.a.mark(Cn),bn=fa.a.mark(wn),vn=fa.a.mark(Nn),On=fa.a.mark(Un),kn=fa.a.mark(Tn),Rn=fa.a.mark(Mn),hn=fa.a.mark(Fn),In=fa.a.mark(Ln),jn=fa.a.mark(An),xn=fa.a.mark(Gn),yn=fa.a.mark(Dn),_n=fa.a.mark(Pn),Sn=fa.a.mark(Bn);function Cn(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(cn);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(oe.receiveJoinRoom(t));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),gn)}function wn(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(sn);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(oe.receiveLeaveRoom(t));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),bn)}function Nn(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(un);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(oe.receiveMessage(t));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),vn)}function Un(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(ln);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(oe.receiveRefreshCurrentRoomUsers({talkRoomId:t.roomId,userIds:[t.users].flat().map((function(e){return e.id}))}));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),On)}function Tn(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(pn.fetchCurrentRoomUsers,{talkRoomId:e.talkRoomId});case 2:case"end":return t.stop()}}),kn)}function Mn(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(mn);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(oe.receiveCurrentUserStatus(t));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),Rn)}function Fn(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(En.readyToRecconect,e);case 2:return t.next=4,Object(pa.b)(pn.connectToServer);case 4:return t.next=6,Object(pa.b)(pn.tellJoinedRoom,e);case 6:case"end":return t.stop()}}),hn)}function Ln(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(pn.tellLeavedRoom,e);case 2:return t.next=4,Object(pa.e)(oe.clearMessage(e.roomId));case 4:case"end":return t.stop()}}),In)}function An(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(pn.sendMessage,e);case 2:case"end":return t.stop()}}),jn)}function Gn(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(pn.tellCurrentRoomUserStatusChanged,e);case 2:case"end":return t.stop()}}),xn)}function Dn(e){var t,r;return fa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.translateMode||{translate:function(e){return e}},a.next=3,Object(pa.b)(t.translate,e.text);case 3:return r=a.sent,a.next=6,Object(pa.e)(oe.addMessage(Object(g.a)(Object(g.a)({},e),{},{messageType:"text",messageClass:"myMessage",text:r})));case 6:return a.next=8,Object(pa.e)(oe.sendMessage(Object(g.a)(Object(g.a)({},e),{},{messageType:"text",messageClass:"receiveMessage",text:r})));case 8:case"end":return a.stop()}}),yn)}function Pn(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(pn.tellChangeRoomBgm,{talkRoomId:e.talkRoomId,bgmSrcUrl:e.bgmSrcUrl});case 2:case"end":return t.stop()}}),_n)}function Bn(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(fn);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(oe.receiveChangeRoomBgm({talkRoomId:t.talkRoomId,bgmSrcUrl:t.bgmSrcUrl}));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),Sn)}var Hn=fa.a.mark($n),Vn=fa.a.mark(Zn),Jn=fa.a.mark(Qn),Xn=fa.a.mark(eo),Wn=fa.a.mark(to),Kn=fa.a.mark(ro),qn=function(e){var t=Object.keys(e).reduce((function(t,r){return t.append("user[".concat(r,"]"),e[r]),t}),new FormData);return ka.post({url:"".concat("https://chat-like-app.herokuapp.com/api","/users"),parameter:t,headers:{"Content-Type":"multipart/form-data"}})},zn=function(e){var t=Object.keys(e).reduce((function(t,r){return t.append("user[".concat(r,"]"),e[r]),t}),new FormData);return ka.put({url:"".concat("https://chat-like-app.herokuapp.com/api","/users/").concat(e.id),parameter:t,headers:{"Content-Type":"multipart/form-data"}})},Yn=function(e){var t=e.userSelfId,r=e.userName;return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/api","/users/search?self_id=").concat(t,"&name=").concat(r)})};function $n(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)((function(){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/api","/users")})}));case 2:return e=t.sent,t.next=5,Object(pa.e)(ar.setUser.apply(ar,Object(ce.a)(e.data)));case 5:case"end":return t.stop()}}),Hn)}function Zn(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(un);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(ar.setUser(t.user));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),Vn)}function Qn(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(qn,e.userParams);case 2:if(!(t=r.sent).isSuccess){r.next=6;break}return r.next=6,Object(pa.e)(v.execLogin({session:{name:e.userParams.name,password:e.userParams.password},history:e.history}));case 6:if(!t.isFail){r.next=10;break}return alert("\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"),r.next=10,Object(pa.e)(Ot.setError({formName:"signUpForm",errorJson:t.data}));case 10:if(!t.isError){r.next=13;break}return r.next=13,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 13:case"end":return r.stop()}}),Jn)}function eo(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(zn,e.userParams);case 2:if(!(t=r.sent).isSuccess){r.next=9;break}return alert("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u66f4\u65b0\u3057\u307e\u3057\u305f\u3002"),r.next=7,Object(pa.e)(ar.setUser(t.data));case 7:return r.next=9,Object(pa.e)(v.login(t.data));case 9:if(!t.isFail){r.next=12;break}return r.next=12,Object(pa.e)(Ot.setError({formName:"updateUserForm",errorJson:t.data}));case 12:if(!t.isError){r.next=15;break}return r.next=15,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 15:case"end":return r.stop()}}),Xn)}function to(){var e,t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(ln);case 2:e=r.sent;case 3:return r.next=6,Object(pa.f)(e);case 6:return t=r.sent,r.next=9,Object(pa.e)(ar.setUser.apply(ar,Object(ce.a)(Object.values(t.users))));case 9:r.next=3;break;case 11:case"end":return r.stop()}}),Wn)}function ro(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(Yn,{userSelfId:e.userSelfId,userName:e.userName});case 2:if(!(t=r.sent).isSuccess){r.next=6;break}return r.next=6,Object(pa.e)(ar.setSearchedUsers(t.data));case 6:if(!t.isFail){r.next=12;break}return alert("\u30e6\u30fc\u30b6\u30fc\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"),r.next=10,Object(pa.e)(ar.setSearchedUsers());case 10:return r.next=12,Object(pa.e)(Ot.setError({formName:"userInviteForm",errorJson:t.data}));case 12:if(!t.isError){r.next=15;break}return r.next=15,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 15:case"end":return r.stop()}}),Kn)}var ao=fa.a.mark(oo),no={};function oo(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=no[e.errorCode])){r.next=4;break}return r.next=4,Object(pa.e)(t);case 4:case"end":return r.stop()}}),ao)}no[401]=v.logout();var co=fa.a.mark(io),so=fa.a.mark(mo),uo=fa.a.mark(po),lo=function(e){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/api","/users/").concat(e,"/message_images")})};function io(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pa.e)(_e.clearMessageImage());case 2:case"end":return e.stop()}}),co)}function mo(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(lo,e.loginUser.id);case 2:if(!(t=r.sent).isSuccess){r.next=6;break}return r.next=6,Object(pa.e)(_e.addMessageImage(t.data));case 6:if(!t.isError){r.next=9;break}return r.next=9,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 9:case"end":return r.stop()}}),so)}var fo=function(e){var t=e.userId,r=e.messageImageParams,a=Object.keys(r).reduce((function(e,t){return e.append("message_image[".concat(t,"]"),r[t]),e}),new FormData);return ka.post({url:"".concat("https://chat-like-app.herokuapp.com/api","/users/").concat(t,"/message_images"),parameter:a,headers:{"Content-Type":"multipart/form-data"}})};function po(e){var t;return fa.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(pa.b)(fo,{userId:e.userId,messageImageParams:e.messageImageParams});case 2:if(!(t=r.sent).isSuccess){r.next=6;break}return r.next=6,Object(pa.e)(_e.addMessageImage(t.data));case 6:if(t.isFail&&alert("\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"),!t.isError){r.next=10;break}return r.next=10,Object(pa.e)(Ia.execHandleError({errorResult:t.data}));case 10:case"end":return r.stop()}}),uo)}var Eo=fa.a.mark(jo),go=fa.a.mark(xo),bo=fa.a.mark(yo),vo=fa.a.mark(_o),Oo=fa.a.mark(So),ko=fa.a.mark(Co),Ro=fa.a.mark(wo),ho=fa.a.mark(No),Io=new Audio;function jo(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Io.src=e.bgmSrcUrl,t.next=3,Io.play().catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),Eo)}function xo(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Io.currentTime=0,e.next=3,Io.pause();case 3:case"end":return e.stop()}}),go)}function yo(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Audio("".concat("/Users/givemewater/ReactTest/chat_lik_app/public","/sounds/add_message.mp3")),t.next=3,e.play().catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),bo)}function _o(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Audio("".concat("/Users/givemewater/ReactTest/chat_lik_app/public","/sounds/receive_message.mp3")),t.next=3,e.play().catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),vo)}function So(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Audio("".concat("/Users/givemewater/ReactTest/chat_lik_app/public","/sounds/\u5165\u5e97\u3059\u308b\u3068\u304d\u306e\u30d9\u30eb.mp3")),t.next=3,e.play().catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),Oo)}function Co(){var e;return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Audio("".concat("/Users/givemewater/ReactTest/chat_lik_app/public","/sounds/se_maoudamashii_chime08.mp3")),t.next=3,e.play().catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),ko)}function wo(e){var t,r;return fa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Object.keys(e.bgmParams).reduce((function(t,r){return t.append("bgm[".concat(r,"]"),e.bgmParams[r]),t}),new FormData),a.next=3,Object(pa.b)(ka.post,{url:"".concat("https://chat-like-app.herokuapp.com/api","/users/").concat(e.userId,"/bgms"),parameter:t,headers:{"Content-Type":"multipart/form-data"}});case 3:if(!(r=a.sent).isSuccess){a.next=9;break}return a.next=7,Object(pa.e)(Ye.addBgms({bgms:r.data}));case 7:a.next=10;break;case 9:alert("bgm\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f");case 10:case"end":return a.stop()}}),Ro)}function No(e){var t,r;return fa.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.userId||e.loginUser.id,a.next=3,Object(pa.b)(ka.get,{url:"".concat("https://chat-like-app.herokuapp.com/api","/users/").concat(t,"/bgms")});case 3:return r=a.sent,a.next=6,Object(pa.e)(Ye.addBgms({bgms:r.data}));case 6:case"end":return a.stop()}}),ho)}Io.loop=!0;var Uo=fa.a.mark(Mo),To=fa.a.mark(Fo);function Mo(){var e,t,r,a,n;return fa.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(pa.b)(dn);case 2:e=o.sent;case 3:return o.next=6,Object(pa.f)(e);case 6:t=o.sent,r=Object(Ea.a)(t.users),o.prev=8,r.s();case 10:if((a=r.n()).done){o.next=16;break}return n=a.value,o.next=14,Object(pa.e)(Be.receiveChangeCurrentUserPosition({talkRoomId:t.talkRoomId,userId:n.id,position:n.position}));case 14:o.next=10;break;case 16:o.next=21;break;case 18:o.prev=18,o.t0=o.catch(8),r.e(o.t0);case 21:return o.prev=21,r.f(),o.finish(21);case 24:o.next=3;break;case 26:case"end":return o.stop()}}),Uo,null,[[8,18,21,24]])}function Fo(e){return fa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:pn.tellCurrentRoomUserPositionChanged(e);case 1:case"end":return t.stop()}}),To)}var Lo=fa.a.mark(Xo),Ao=[Object(pa.g)(b.EXEC_DEF_LOG_IN,ga(_a)),Object(pa.g)(b.EXEC_LOG_IN,ga(Sa)),Object(pa.g)(b.EXEC_LOG_OUT,ga(Ca))],Go=[Object(pa.g)(b.LOG_IN,ga(io,mo)),Object(pa.g)(Re,ga(po))],Do=[Object(pa.g)(b.LOG_IN,ga(Va)),Object(pa.g)(b.LOG_IN,ga(Ja)),Object(pa.g)(Ut,Va),Object(pa.g)(Tt,Ja),Object(pa.g)(Mt,Xa),Object(pa.g)(Lt,Wa),Object(pa.g)(Ft,Ka),Object(pa.g)(Ht,qa),Object(pa.g)(Vt,za)],Po=[Object(pa.g)(B,Fn),Cn(),Object(pa.g)(V,Ln),wn(),Object(pa.g)(K,An),Nn(),Object(pa.g)($,Tn),Un(),Object(pa.g)(Q,Gn),Mn(),Object(pa.g)(te,ga(Dn)),Object(pa.g)(ae,Pn),Bn()],Bo=[Object(pa.g)(b.LOG_IN,ga($n)),Object(pa.g)(Yt,ga(Qn)),Object(pa.g)(Zt,ga(ro)),Object(pa.g)($t,ga(eo)),Zn(),to()],Ho=[Mo(),Object(pa.g)(De,Fo),Object(pa.g)(B,Fo)],Vo=[Object(pa.g)(ha,oo)],Jo=[Object(pa.g)(B,So),Object(pa.g)(H,So),Object(pa.g)(V,Co),Object(pa.g)(J,Co),Object(pa.g)(W,yo),Object(pa.g)(q,_o),Object(pa.h)(Ke,jo),Object(pa.h)(V,xo),Object(pa.h)(X,xo),Object(pa.g)(qe,ga(wo)),Object(pa.g)(b.LOG_IN,No),Object(pa.g)(ae,jo),Object(pa.g)(ne,jo)];function Xo(){return fa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pa.a)([].concat(Ao,Go,Do,Po,Bo,Vo,Jo,Ho));case 2:case"end":return e.stop()}}),Lo)}var Wo={401:function(e){return Object(g.a)(Object(g.a)({},e),{},{loginUser:!1})}},Ko={};Ko[ha]=function(e,t){var r=Wo[t.errorCode];return r?r(e):e};var qo={createReducer:O({},Ko)},zo={action:Ia,reducer:qo},Yo=r(99),$o={simple:{modeId:"simple",modeName:"Simple",modeTitle:"\u3010\u7ffb\u8a33\u306a\u3057\u3011",placeholder:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\u3057\u3066\u306d",description:"\u7ffb\u8a33\u305b\u305a\u3001\u66f8\u3044\u305f\u307e\u307e\u9001\u4fe1\u3057\u307e\u3059\u3002",translate:function(e){return e}},nomlishLv1:{modeId:"nomlishLv1",modeName:"NomlishLv1",modeTitle:"\u3010\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5\u7ffb\u8a33Lv1\u3011",placeholder:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv1",description:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv1",translate:function(e){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/nomlish","/translate/1?text=").concat(e)}).then((function(e){return e.data})).catch((function(e){return console.error(e),""}))}},nomlishLv2:{modeId:"nomlishLv2",modeName:"NomlishLv2",modeTitle:"\u3010\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5\u7ffb\u8a33Lv2\u3011",placeholder:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv2",description:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv2",translate:function(e){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/nomlish","/translate/2?text=").concat(e)}).then((function(e){return e.data})).catch((function(e){return console.error(e),""}))}},nomlishLv3:{modeId:"nomlishLv3",modeName:"NomlishLv3",modeTitle:"\u3010\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5\u7ffb\u8a33Lv3\u3011",placeholder:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv3",description:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv3",translate:function(e){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/nomlish","/translate/3?text=").concat(e)}).then((function(e){return e.data})).catch((function(e){return console.error(e),""}))}},nomlishLv4:{modeId:"nomlishLv4",modeName:"NomlishLv4",modeTitle:"\u3010\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5\u7ffb\u8a33Lv4\u3011",placeholder:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv4",description:"\u7ffb\u8a33\u30e2\u30fc\u30c9:\u30ce\u30e0\u30ea\u30c3\u30b7\u30e5Lv4",translate:function(e){return ka.get({url:"".concat("https://chat-like-app.herokuapp.com/nomlish","/translate/4?text=").concat(e)}).then((function(e){return e.data})).catch((function(e){return console.error(e),""}))}}},Zo={};Zo[r(99).TranslateModeActionTypes.CHANGE_TRANSLATE_MODE_DESCRIPTION]=function(e,t){return(e[t.translateMode]||{}).descripition=t.description,Object(g.a)({},e)};var Qo={createReducer:O($o,Zo)},ec={action:Yo.default,reducer:Qo},tc={};tc[ze]=function(e,t){var r=[t.bgms].flat().reduce((function(e,t){return e[t.id]=t,e}),e);return Object(g.a)(Object(g.a)({},e),r)};var rc={createReducer:O({0:{id:0,src:""}},tc)},ac=Object(oa.a)(),nc=Object(na.e)(Object(na.c)({currentRoomStatus:ie.reducer.createMessageReducer,logStatus:h.reducer.creatReducer,messageImages:Ne.reducer.createReducer,bgms:rc.createReducer,talkRooms:dr.reducer.createReducer,loading:ma.reducer.createReducer,users:ur.reducer.createReducer,userPositions:Xe.reducer.createUserPositionReducer,formErrors:It.reducer.createReducer,errorCodes:zo.reducer.createReducer,translateModes:ec.reducer.createReducer}),Object(na.a)(ac));ac.run(Xo);var oc=nc,cc=r(32).createBrowserHistory();c.a.render(n.a.createElement(E.Provider,{store:oc},n.a.createElement(aa,{history:cc})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},99:function(e,t,r){"use strict";r.r(t),r.d(t,"TranslateModeActionTypes",(function(){return a}));var a={CHANGE_TRANSLATE_MODE_DESCRIPTION:"CHANGE_TRANSLATE_MODE_DESCRIPTION"};t.default={changeDescription:function(e){var t=e.translateMode,r=e.description;return{type:a.CHANGE_TRANSLATE_MODE_DESCRIPTION,translateMode:t,description:r}}}}},[[162,1,2]]]);
//# sourceMappingURL=main.8f8f68c8.chunk.js.map